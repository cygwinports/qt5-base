--- origsrc/qtbase-opensource-src-5.6.2/mkspecs/cygwin-g++/qmake.conf	2016-05-25 10:46:17.000000000 -0500
+++ src/qtbase-opensource-src-5.6.2/mkspecs/cygwin-g++/qmake.conf	2016-08-15 11:27:51.987645800 -0500
@@ -6,7 +6,7 @@
 
 MAKEFILE_GENERATOR      = UNIX
 QMAKE_PLATFORM          = cygwin unix posix
-CONFIG                 += incremental unversioned_libname
+CONFIG                 += incremental
 QMAKE_INCREMENTAL_STYLE = sublib
 
 QMAKE_COMPILER          = gcc
@@ -16,7 +16,11 @@ QMAKE_LEX               = flex
 QMAKE_LEXFLAGS          =
 QMAKE_YACC              = bison -y
 QMAKE_YACCFLAGS         = -d
-QMAKE_CFLAGS            = -pipe
+QMAKE_YACCFLAGS_MANGLE  = -p $base -b $base
+QMAKE_YACC_HEADER       = $base.tab.h
+QMAKE_YACC_SOURCE       = $base.tab.c
+
+QMAKE_CFLAGS            = -pipe -fno-keep-inline-dllexport
 QMAKE_CFLAGS_DEPS       = -M
 QMAKE_CFLAGS_WARN_ON    = -Wall -W
 QMAKE_CFLAGS_WARN_OFF   = -w
@@ -25,6 +29,21 @@ QMAKE_CFLAGS_DEBUG      = -g
 QMAKE_CFLAGS_SHLIB      =
 QMAKE_CFLAGS_YACC       = -Wno-unused -Wno-parentheses
 QMAKE_CFLAGS_THREAD     = -D_REENTRANT
+QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO = -O2 -g
+QMAKE_CFLAGS_PRECOMPILE       = -x c-header -c ${QMAKE_PCH_INPUT} -o ${QMAKE_PCH_OUTPUT}
+QMAKE_CFLAGS_USE_PRECOMPILE   = -include ${QMAKE_PCH_OUTPUT_BASE}
+QMAKE_CFLAGS_EXCEPTIONS_OFF = -fno-exceptions
+QMAKE_CFLAGS_SPLIT_SECTIONS = -ffunction-sections
+QMAKE_CFLAGS_LTCG           = -flto -fno-fat-lto-objects
+QMAKE_CFLAGS_LTCG_FATOBJECTS = -ffat-lto-objects
+QMAKE_CFLAGS_DISABLE_LTCG   = -fno-lto
+QMAKE_CFLAGS_SSE2       = -msse2 -mstackrealign
+QMAKE_CFLAGS_SSE3       = -msse3
+QMAKE_CFLAGS_SSSE3      = -mssse3
+QMAKE_CFLAGS_SSE4_1     = -msse4.1
+QMAKE_CFLAGS_SSE4_2     = -msse4.2
+QMAKE_CFLAGS_AVX        = -mavx
+QMAKE_CFLAGS_AVX2       = -mavx2
 
 QMAKE_CXX               = g++
 QMAKE_CXXFLAGS          = $$QMAKE_CFLAGS
@@ -36,13 +55,30 @@ QMAKE_CXXFLAGS_DEBUG    = $$QMAKE_CFLAGS
 QMAKE_CXXFLAGS_SHLIB    = $$QMAKE_CFLAGS_SHLIB
 QMAKE_CXXFLAGS_YACC     = $$QMAKE_CFLAGS_YACC
 QMAKE_CXXFLAGS_THREAD   = $$QMAKE_CFLAGS_THREAD
+QMAKE_CXXFLAGS_CXX11    = -std=c++11
+QMAKE_CXXFLAGS_CXX14    = -std=c++14
+QMAKE_CXXFLAGS_CXX1Z    = -std=c++1z
+QMAKE_CXXFLAGS_GNUCXX11 = -std=gnu++11
+QMAKE_CXXFLAGS_GNUCXX14 = -std=gnu++14
+QMAKE_CXXFLAGS_GNUCXX1Z = -std=gnu++1z
+QMAKE_CXXFLAGS_RTTI_ON  = -frtti
+QMAKE_CXXFLAGS_RTTI_OFF = -fno-rtti
+QMAKE_CXXFLAGS_EXCEPTIONS_ON = -fexceptions
+QMAKE_CXXFLAGS_EXCEPTIONS_OFF = -fno-exceptions
+QMAKE_CXXFLAGS_SPLIT_SECTIONS = $$QMAKE_CFLAGS_SPLIT_SECTIONS
+QMAKE_CXXFLAGS_LTCG        = $$QMAKE_CFLAGS_LTCG
+QMAKE_CXXFLAGS_LTCG_FATOBJECTS = $$QMAKE_CFLAGS_LTCG_FATOBJECTS
+QMAKE_CXXFLAGS_DISABLE_LTCG   = $$QMAKE_CFLAGS_DISABLE_LTCG
+QMAKE_CXXFLAGS_RELEASE_WITH_DEBUGINFO = $$QMAKE_CFLAGS_RELEASE_WITH_DEBUGINFO
+QMAKE_CXXFLAGS_PRECOMPILE     = -x c++-header -c ${QMAKE_PCH_INPUT} -o ${QMAKE_PCH_OUTPUT}
+QMAKE_CXXFLAGS_USE_PRECOMPILE = $$QMAKE_CFLAGS_USE_PRECOMPILE
 
 QMAKE_INCDIR            =
 QMAKE_LIBDIR            =
-QMAKE_INCDIR_X11        = /usr/X11R6/include
-QMAKE_LIBDIR_X11        = /usr/X11R6/lib
-QMAKE_INCDIR_OPENGL     = /usr/X11R6/include
-QMAKE_LIBDIR_OPENGL     = /usr/X11R6/lib
+QMAKE_INCDIR_X11        =
+QMAKE_LIBDIR_X11        =
+QMAKE_INCDIR_OPENGL     =
+QMAKE_LIBDIR_OPENGL     =
 
 QMAKE_LINK              = g++
 QMAKE_LINK_SHLIB        = g++
@@ -53,23 +89,37 @@ QMAKE_LFLAGS_RELEASE    =
 QMAKE_LFLAGS_DEBUG      =
 QMAKE_LFLAGS_SHLIB      = -shared
 QMAKE_LFLAGS_PLUGIN     = $$QMAKE_LFLAGS_SHLIB
-QMAKE_LFLAGS_SONAME     = -Wl,-soname,
+QMAKE_LFLAGS_SONAME     =
 QMAKE_LFLAGS_THREAD     =
-QMAKE_LFLAGS_RPATH      = -Wl,-rpath,
+QMAKE_LFLAGS_RPATH      =
+QMAKE_LFLAGS_CXX11      =
+QMAKE_LFLAGS_CXX14      =
+QMAKE_LFLAGS_CXX1Z      =
+QMAKE_LFLAGS_GCSECTIONS = -Wl,--gc-sections
+QMAKE_LFLAGS_RELEASE_WITH_DEBUGINFO +=
+QMAKE_LFLAGS_EXCEPTIONS_OFF +=
+QMAKE_LFLAGS_LTCG       = $$QMAKE_CFLAGS_LTCG -fuse-linker-plugin
 
 QMAKE_LIBS              =
 QMAKE_LIBS_DYNLOAD      = -ldl
 QMAKE_LIBS_X11          = -lXext -lX11
 QMAKE_LIBS_OPENGL       = -lGL
 QMAKE_LIBS_THREAD       = -lpthread
-QMAKE_PREFIX_SHLIB      = lib
+QMAKE_PREFIX_SHLIB      = cyg
 QMAKE_EXTENSION_SHLIB   = dll
 QMAKE_PREFIX_STATICLIB  = lib
 QMAKE_EXTENSION_STATICLIB = a
+QMAKE_PCH_OUTPUT_EXT    = .gch
+QMAKE_CYGWIN_EXE        = 1
+QMAKE_CYGWIN_SHLIB      = 1
 
 QMAKE_AR                = ar cqs
 QMAKE_OBJCOPY           = objcopy
 QMAKE_NM                = nm -P
 QMAKE_RANLIB            =
+# Wrapper tools that understand .o/.a files with GIMPLE instead of machine code
+QMAKE_AR_LTCG           = gcc-ar cqs
+QMAKE_NM_LTCG           = gcc-nm -P
+QMAKE_RANLIB_LTCG       = true          # No need to run since gcc-ar has "s"
 
 load(qt_config)
--- origsrc/qtbase-opensource-src-5.6.1/mkspecs/cygwin-g++/qplatformdefs.h	2016-05-25 10:46:17.000000000 -0500
+++ src/qtbase-opensource-src-5.6.1/mkspecs/cygwin-g++/qplatformdefs.h	2016-08-15 11:18:51.782347400 -0500
@@ -63,14 +63,12 @@
 
 #include <sys/types.h>
 #include <sys/ioctl.h>
-// Cygwin does not provide <sys/ipc.h> and <sys/shm.h> because it
-// doesn't support SysV IPC or shared memory. See for example:
-//      http://afni.nimh.nih.gov/afni/afniboard/messages/1725.html
+#include <sys/ipc.h>
+#include <sys/shm.h>
 #include <sys/time.h>
 #include <sys/socket.h>
 #include <sys/stat.h>
 #include <sys/wait.h>
-//#include <windows.h>
 #include <netinet/in.h>
 
 #define QT_NO_USE_FSEEKO
@@ -79,7 +77,7 @@
 #undef QT_OPEN_LARGEFILE
 #define QT_OPEN_LARGEFILE 0
 
-#if defined(_XOPEN_SOURCE) && (_XOPEN_SOURCE >= 500)
+#if defined(_XOPEN_SOURCE) && (_XOPEN_SOURCE - 0 >= 500)
 #define QT_SNPRINTF             ::snprintf
 #define QT_VSNPRINTF            ::vsnprintf
 #endif
--- origsrc/qtbase-opensource-src-5.6.1/mkspecs/features/qt_functions.prf	2016-05-25 10:46:17.000000000 -0500
+++ src/qtbase-opensource-src-5.6.1/mkspecs/features/qt_functions.prf	2016-08-15 11:19:45.323566600 -0500
@@ -179,7 +179,7 @@ defineTest(qtAddTargetEnv) {
     deps = $$resolve_depends(deps, "QT.", ".depends" ".run_depends")
     !isEmpty(deps) {
         deppath.CONFIG = prepend
-        equals(QMAKE_HOST.os, Windows) {
+        contains(QMAKE_HOST.os, Windows|CYGWIN.*) {
             deppath.CONFIG = always_prepend
             deppath.name = PATH
         } else:contains(QMAKE_HOST.os, Linux|FreeBSD|OpenBSD|NetBSD|DragonFly|SunOS|HP-UX|QNX|GNU) {
